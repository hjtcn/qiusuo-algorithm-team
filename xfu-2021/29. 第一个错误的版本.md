# 278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬

> LeetCodeåœ°å€ï¼š[è®¿é—®](https://leetcode-cn.com/problems/first-bad-version/) 
Githubåœ°å€ï¼šè®¿é—®

## é¢˜ç›®åŠé¢˜æ„åˆ†æ

### é¢˜ç›®

ä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚

å‡è®¾ä½ æœ‰ n ä¸ªç‰ˆæœ¬ [1, 2, ..., n]ï¼Œä½ æƒ³æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚

ä½ å¯ä»¥é€šè¿‡è°ƒç”¨Â bool isBadVersion(version)Â æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· version æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚

**ç¤ºä¾‹ï¼š**

```
ç»™å®š n = 5ï¼Œå¹¶ä¸” version = 4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚

è°ƒç”¨ isBadVersion(3) -> false
è°ƒç”¨ isBadVersion(5)Â -> true
è°ƒç”¨ isBadVersion(4)Â -> true

æ‰€ä»¥ï¼Œ4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚Â 
```

### é¢˜æ„

- æ ¹æ®æ‰€ç»™æ–¹æ³•åˆ¤æ–­ç›®æ ‡åŒºé—´çš„ç¬¬ä¸€ä¸ªå€¼
- åˆ¤æ–­æ–¹æ³•å·²ç»ç»™å‡ºäº†
- è¿”å›ç¬¬ä¸€ä¸ªå€¼

### è§£é¢˜æ€è·¯

1. åˆ©ç”¨äºŒåˆ†æ³•æ€æƒ³ï¼Œä¸æ–­çš„åˆ¤æ–­å·¦å³è¾¹ç•Œå’Œmidå€¼æ˜¯ä¸æ˜¯é”™è¯¯ç‰ˆæœ¬

**é€»è¾‘æ¢³ç†**

1. å¯¹ç‰ˆæœ¬å·è¿›è¡ŒäºŒåˆ†åˆ¤æ–­
2. è‹¥midå€¼ä¸æ˜¯é”™è¯¯ç‰ˆæœ¬ï¼Œç”±é¢˜æ„ï¼Œé”™è¯¯ç‰ˆæœ¬ä¸€å®šåœ¨å³ä¾§æ•°ç»„ï¼Œå› æ­¤ç›´æ¥ç¼©å‡æ•°ç»„ä¸ºå³ä¾§æ•°ç»„
3. è‹¥midå€¼æ˜¯é”™è¯¯åˆ¤æ–­
    - åˆ¤æ–­midçš„ä¸Šä¸€ä¸ªç‰ˆæœ¬æ˜¯ä¸æ˜¯é”™è¯¯ç‰ˆæœ¬
        - ä¸Šä¸€ä¸ªç‰ˆæœ¬æ˜¯é”™è¯¯ç‰ˆæœ¬ï¼Œè¡¨æ˜ç¬¬ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬åº”è¯¥åœ¨å·¦ä¾§æ•°ç»„ï¼ˆæ­¤æ—¶ç¬¬ä¸€ä¸ªç‰ˆæœ¬æœ‰å¯èƒ½æ˜¯å½“å‰åˆ¤æ–­çš„ç‰ˆæœ¬ï¼Œå› æ­¤ç¼©å‡æ—¶ä¸èƒ½æ’é™¤å½“å‰ç‰ˆæœ¬å€¼ï¼‰
        - ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸æ˜¯é”™è¯¯ç‰ˆæœ¬ï¼Œè¡¨æ˜å½“å‰çš„midå€¼å°±æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬ï¼Œå› æ­¤ç›´æ¥è¿”å›å°±å¥½äº†

## ä»£ç å®ç°

**æ­£ç¡®ä»£ç **

```tsx
/**
 * The knows API is defined in the parent class Relation.
 * isBadVersion(version: number): boolean {
 *     ...
 * };
 */

var solution = function(isBadVersion: (x: number) => boolean) {

    return function(n: number): number {
        let left = 1;
        let right = n;
        while(left <= right){
            const mid = Math.floor((left + right)/2);
            const badPrev = isBadVersion(mid -1);
            const badMid = isBadVersion(mid);

            // ä¸­é—´å€¼ä¸æ˜¯é”™è¯¯ç‰ˆæœ¬ =ã€‹ é”™è¯¯å€¼åœ¨å³ä¾§
            // ä¸­é—´å€¼å’Œå³è¾¹çš„å€¼æ˜¯é”™è¯¯ç‰ˆæœ¬ => é”™è¯¯å€¼åœ¨å·¦ä¾§
            if(badMid){
                // åˆ¤æ–­midçš„ä¸Šä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯é”™è¯¯çš„
                if(badPrev){
                    right = mid -1;
                }else{
                    return mid;
                }
            }else{
                left = mid +1;
            }
        }
    };
};
```

## æ€»ç»“ï¼š

- è¿™é“é¢˜å€Ÿç”¨äºŒåˆ†çš„æ€æƒ³å®ç°è¿˜æ˜¯æŒºæœ‰æ„æ€çš„ã€‚
- leetCodeç»™çš„åˆå§‹å…¥å‚ `isBadVersion` ç±»å‹æ˜¯ `any` ä¸€å¼€å§‹éƒ½æ²¡æœ‰çœ‹æ‡‚è¿™ä¸ªæ˜¯è¦æˆ‘æ€ä¹ˆå†™ä»£ç ã€‚ ğŸ˜…